<section class="formulaireTitle">
  <h2>Demande de Formation Personalisée  </h2>
</section>

<body class="formulaire-body">


  <div class="container">
    <h1 class="form__title">Votre Demande </h1>
    <div class="form__message form__message--error"></div>

    <form class="form form--hidden" [formGroup]="userForm" (ngSubmit)="onSubmit()">
      <!-- Nom -->
      <div class="form__input-group">
        
        <label class ="form__input-text" for="nom">Nom : </label>
        <div class="form__input-error-message"></div>
        <input
          type="text"
          class="form__input"
          id="nom"
          formControlName="nom"
          placeholder="Nom"
        />
  
        @if (submitted && form['nom'].invalid) {
        <span>
          @if (form['nom'].hasError('minlength')) {
             <span>
              * Nom doit contenir au minimum 2 caractères
            </span>
          }
          @if (!form['nom'].value) {
            <span>
              * Nom obligatoire
            </span>
           }
        </span>
       }
      </div>


      <!-- Prenom -->
      <div class="form__input-group">
        <label class ="form__input-text" for="prenom">Prenom : </label>
        <div class="form__input-error-message"></div>
        <input
          type="text"
          class="form__input" 
          id="prenom"
          formControlName="prenom"
          placeholder="Prenom"
        />
        @if (submitted && form['prenom'].invalid) {
        <span>
          @if (form['prenom'].hasError('minlength')) {
          <span>
            * Prénom doit contenir au minimum 2 caractères
          </span>
        }
          @if (!form['prenom'].value) {
          <span>
            * Prénom obligatoire
          </span>
        }
        </span>
      }
      </div>

      <!-- Type de Formation -->
      <div class="form__input-group">
        <label class ="form__input-text" for="typeFormation">Type de Formation : </label>
        <div class="form__input-error-message"></div>
        <div>
          <input
          type="radio"
          class="form__input" 
          id="interEntreprise"
          formControlName="typeFormation"
          value="interEntreprise"
          name="typeFormation" />

          <label class ="form__input-text" for="interEntreprise">Inter-Entreprise</label>
        </div>

        <div>
          <div class="form__input-error-message"></div>
          <input
          type="radio"
          class="form__input" 
          id="intraEntreprise"
          formControlName="typeFormation"
          value="intraEntreprise"
          
          name="typeFormation" />

          <label class ="form__input-text" for="intraEntreprise">Intra-Entreprise</label>
        </div>

        <div>
          <div class="form__input-error-message"></div>
          <input
          type="radio"
          class="form__input" 
          id="autre"
          formControlName="typeFormation"
          value="autre"
          
          name="typeFormation" />

          <label class ="form__input-text" for="autre">Autre</label>
        </div>
        
        @if (submitted && form['typeFormation'].invalid) {
        <span>
          @if (!form['typeFormation'].value) {
          <span>
            * Champ obligatoire
          </span>
        }
        </span>
      }
      </div>


      <!-- Nom de l'Entreprise -->
      <div class="form__input-group">
        <label class ="form__input-text" for="entreprise">Nom de l'Entreprise : </label>
        <div class="form__input-error-message"></div>
        <input
          type="text"
          class="form__input" 
          id="entreprise"
          formControlName="entreprise"
          placeholder="Entreprise"
        />
        @if (submitted && form['entreprise'].invalid) {
        <span>
          @if (form['entreprise'].hasError('minlength')) {
          <span>
            * Entreprise doit contenir au minimum 2 caractères
          </span>
         }
          @if (!form['entreprise'].value) {
          <span>
            * Entreprise obligatoire
          </span>
         }
        </span>
       }
      </div>

      <!-- Email -->
      <div class="form__input-group">
        <label class ="form__input-text" for="email">Email : </label>
        <div class="form__input-error-message"></div>
        <input
          type="email"
          class="form__input" 
          id="email"
          formControlName="email"
          placeholder="Email"
        />
        @if (submitted && form['email'].invalid) {
        <span>
          @if (form['email'].hasError('email')) {
          <span>
            * Email invalide
          </span>
         }
          @if (!form['email'].value) {
          <span>
            * Email obligatoire
          </span>
         }
        </span>
      }
      </div>

      <!-- Telephone -->
      <div  class="form__input-group" id="telephone" formArrayName="telephones">
              @for (telephone of telephones.controls; track telephone; let i = $index) {
              <div>
                <label class ="form__input-text" for="telephone">Telephone : </label>
                <div class="form__input-error-message"></div>
                <input
                  type="tel"
                  class="form__input" 
                  id="telephone"
                  [formControlName]="i"
                  placeholder="Telephone"
                />
  
                @if (submitted && telephone.invalid) {
                <span>
                  @if (telephone.hasError('minlength')) {
                  <span>
                    * Telephone doit contenir au moins 10 chiffres
                  </span>
                }
                  @if (!telephone.value) {
                  <span>
                    * Téléphone obligatoire
                  </span>
                }
                </span>
              }
              </div>
            }
  
              <button class="telephone-button" type="button" (click)="addTelephone()">+</button>
              @if (telephones.length > 1) {
                <button class="telephone-button" type="button" (click)="removeTelephone()">-</button>
              }
        </div>

        <!-- Demande de Formation Spécialisée -->
      <div class="form__input-group">
        <label class ="form__input-text" for="demande">Demande de Formation Spécialisée : </label>
        <div class="form__input-error-message"></div>
        <textarea
          class="form__input" 
          id="demande"
          formControlName="demande"
          placeholder="Demande"
        >
        
        </textarea>
          
        
        @if (submitted && form['demande'].invalid) {
        <span>
          @if (form['demande'].hasError('minlength')) {
          <span>
            * La Demande doit contenir au minimum 2 caractères
          </span>
         }
          @if (!form['demande'].value) {
          <span>
            * Demande obligatoire
          </span>
         }
        </span>
       }
      </div>
      <!-- Button Submit -->
            <div>
              <button class="form__button" type="submit">Envoyer</button>
            </div>
    
      </form>
    </div>

    



</body>
    
